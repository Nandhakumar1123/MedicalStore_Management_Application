<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body { background:#f9f9f9; font-family: Arial, sans-serif; margin:0; padding:0; }
        header { background:linear-gradient(90deg, #007bff, #00c6ff); color: white; padding: 20px; text-align: center; font-size: 28px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        nav { background:#0056b3; padding: 12px; text-align: center; }
        nav a { color: white; margin: 0 20px; text-decoration: none; font-weight: bold; font-size: 16px; transition: color 0.3s, transform 0.3s; }
        nav a:hover { color: #ffd700; transform: scale(1.1); }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; padding: 50px; }
        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 6px 15px rgba(0,0,0,0.15); text-align: center; transition: transform 0.3s, box-shadow 0.3s; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,0.25); }
        .card img { width: 80px; height: 80px; margin-bottom: 20px; }
        .card h3 { color:#007bff; margin-bottom:10px; }
        .card p { font-size: 22px; font-weight: bold; color:#333; }
        canvas { max-width: 600px; margin: 30px auto; display: block; }
        .timestamp { text-align:center; color:#555; margin-top:10px; font-size:14px; }
        footer { background:#0056b3; color:white; padding:15px; text-align:center; margin-top:30px; font-size:14px; }
    </style>
</head>
<body>
    
    <header>Dashboard</header>
    
    <nav>
        <a href="/dashboard">Dashboard</a>
        <a href="/medicines">Medicines</a>
        <a href="/add_medicine">Add Medicines</a>
        <a href="/billing">Billing</a>
        <a href="/report">Reports</a>
    </nav>

    <!-- Stats -->
    <div class="grid">
        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/512/2966/2966486.png" alt="Medicines">
            <h3>Total Medicines</h3>
            <p class="count" data-target="{{medicines}}">0</p>
        </div>
        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/512/1170/1170678.png" alt="Sales">
            <h3>Total Sales</h3>
            <p class="count" data-target="{{sales}}">0</p>
        </div>
        <div class="card">
            <img src="https://cdn-icons-png.flaticon.com/512/859/859270.png" alt="Arrivals">
            <h3>Total Arrivals</h3>
            <p class="count" data-target="{{arrivals}}">0</p>
        </div>
    </div>

    <!-- Chart -->
    <canvas id="dashboardChart"></canvas>

    <div class="timestamp">
        Last updated: <span id="lastUpdated"></span>
    </div>

    <footer>&copy; 2025 Medical Store | Nandhakumar</footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Counter animation
        document.querySelectorAll('.count').forEach(counter => {
            const target = +counter.getAttribute('data-target');
            let count = 0;
            const step = Math.ceil(target / 100);
            const update = () => {
                count += step;
                if (count >= target) {
                    counter.textContent = target;
                } else {
                    counter.textContent = count;
                    requestAnimationFrame(update);
                }
            };
            update();
        });

        // Chart
        const ctx = document.getElementById("dashboardChart");
        new Chart(ctx, {
            type: "doughnut",
            data: {
                labels: ["Medicines", "Sales", "Arrivals"],
                datasets: [{
                    data: [{{medicines}}, {{sales}}, {{arrivals}}],
                    backgroundColor: ["#007bff", "#28a745", "#ffc107"]
                }]
            }
        });

        // Last updated time
        document.getElementById("lastUpdated").textContent = new Date().toLocaleString();
    </script>
</body>
</html>
